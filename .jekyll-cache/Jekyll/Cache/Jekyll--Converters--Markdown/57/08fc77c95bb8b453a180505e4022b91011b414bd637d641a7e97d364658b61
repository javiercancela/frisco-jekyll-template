I"≤ <p>La forma m√°s eficiente de montar un blog con Jekyll consiste en descargarse una plantilla y modificarla seg√∫n nuestras necesidades. La p√°gina <a href="http://jekyll.tips/templates/">Jekyll Tips</a> tiene varias plantillas para elegir. Yo me decant√© por <a href="https://github.com/CloudCannon/frisco-jekyll-template">Frisco</a>.</p>

<p>Para instalar la plantilla basta con hacer un fork del repositorio, y renombrarlo como nombreusuario.github.io. Sin hacer nada m√°s tendremos un sitio de ejemplo instalado en nuestra p√°gina (http://nombreusuario.github.io).</p>

<p>La p√°gina de este blog es <a href="http://javiercancela.github.io">http://javiercancela.github.io</a>, y el repositorio es <a href="https://github.com/javiercancela/javiercancela.github.io">https://github.com/javiercancela/javiercancela.github.io</a>, donde se puede encontrar todo el c√≥digo al que me refiero m√°s abajo.</p>

<p>Como esta plantilla est√° pensada como p√°gina corporativa, lo primero que hice fue eliminar todo salvo el blog (que pas√© al ra√≠z de la web). Despu√©s a√±ad√≠ una p√°gina ‚ÄúSobre m√≠‚Äù usando el html de la p√°gina ra√≠z original. Para estos cambios s√≥lo hizo falta mover los archivos de sitio, cambiar alguna ruta relativa y actualizar el men√∫ y el pie de p√°gina (los archivos footer.yml y navigatio.yml de la carpeta _data). En el footer actualic√© tambi√©n los enlaces de las redes sociales. Tampoco hay que olvidarse de actualizar los datos del _config.yml.</p>

<h2 id="front-matter">Front matter</h2>
<p>Los archivos html y md (Markdown) de los sitios creados en Jekyll suelen comenzar por una secci√≥n delimitada por tres guiones. Algo as√≠:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
title: Blog
layout: default
description: El blog de Javier Cancela.
image: https://source.unsplash.com/EZSm8xRjnX0/2000x1322
---
</code></pre></div></div>

<p>El prop√≥sito de esta cabecera, llamada en ingl√©s <em>front matter</em>, es definir valores y metadatos para su archivo. El ejemplo de arriba est√° sacado del archivo <code class="language-plaintext highlighter-rouge">index.html</code> de la ra√≠z de la p√°gina. Ese archivo contiene √∫nicamente un par de elementos <code class="language-plaintext highlighter-rouge">&lt;section&gt;</code> con el html espec√≠fico de la pantalla de inicio. El resto del html es compartido con m√°s p√°ginas y est√° en <code class="language-plaintext highlighter-rouge">_layouts\default.html</code> para ser reutilizado f√°cilmente (los archivos <em>layout</em> contienen un elemento <code class="language-plaintext highlighter-rouge">{{ content }}</code> que se sustituye por el contenido del archivo al que se aplica el <em>layout</em>). As√≠, la l√≠nea</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>layout: default
</code></pre></div></div>
<p>del <em>front matter</em> es un metadato de la p√°gina. Y la l√≠nea</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image: https://source.unsplash.com/EZSm8xRjnX0/2000x1322
</code></pre></div></div>
<p>es una variable, que permite que dentro del html de la p√°gina accedamos a esa url con <code class="language-plaintext highlighter-rouge">page.image</code>.</p>

<p>Para no tener que indicar el <em>layout</em> en cada p√°gina, podemos definir en el archivo <code class="language-plaintext highlighter-rouge">_config.yml</code> el layout por defecto, as√≠ como <em>layouts</em> espec√≠ficos para tipos de archivos o para ciertas rutas:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>defaults:
  -
    scope:
      path: ""
    values:
      layout: "default"
  -
    scope:
      type: "posts"
    values:
      layout: "post"
</code></pre></div></div>

<h2 id="includes">Includes</h2>
<p>El <em>layout</em> nos sirve para compartir una estructura html com√∫n entre p√°ginas. Pero a veces necesitamos reutilizar peque√±os trozos de c√≥digo en distintas partes de nuestra web. En estos casos utilizamos la carpeta <code class="language-plaintext highlighter-rouge">_includes</code>, donde guardaremos el c√≥digo a reutilizar en archivos html. Veamos un ejemplo.</p>

<p>El <em>layout</em> para los archivos de tipo post de este sitio (los incluidos en la carpeta <code class="language-plaintext highlighter-rouge">_posts</code>) es <code class="language-plaintext highlighter-rouge">_layouts\post.html</code>. Este archivo (que usa a su vez otro <em>layout</em>, no hay problema en encadenarlos) contiene la siguiente l√≠nea:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% include post-title.html post=page %}
</code></pre></div></div>
<p>Esta l√≠nea nos dice que en ese punto del archivo se va a insertar el c√≥digo incluido en <code class="language-plaintext highlighter-rouge">_includes\post-title.html</code>, y se le va a pasar la propiedad <code class="language-plaintext highlighter-rouge">page</code> en la variable <code class="language-plaintext highlighter-rouge">post</code>. La propiedad <code class="language-plaintext highlighter-rouge">page</code> nos da acceso a las variables definidas en el <em>front matter</em>, as√≠ como a otras propiedades como la url de la p√°gina. Al pasarla al <em>include</em> conseguimos que estas propiedades tambi√©n est√©n disponibles all√≠.</p>

<p>El archivo <code class="language-plaintext highlighter-rouge">_includes\post-title.html</code> contiene este c√≥digo:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"post-details"</span><span class="nt">&gt;</span>
    {% for category in include.post.categories %}
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"blog-filter"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ site.baseurl }}/category/{{ category}}/"</span><span class="nt">&gt;</span>{{ category | capitalize }}<span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;/span&gt;</span>
    {% endfor %}
    {% if post.date %}
        {% assign postdate = post.date %}
    {% else %}  
        {% assign postdate = page.date %}
    {% endif %}
    {% assign months = "enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre" | split: "|" %}
    {% assign m = postdate | date: "%-m" | minus: 1 %}
    {% assign day = postdate | date: "%d" %}
    {% assign month = months[m] %}
    {% assign year = postdate | date: "%Y" %}
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"post-date"</span><span class="nt">&gt;</span>{{ day }} de {{ month }} de {{ year }}<span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/p&gt;</span>

</code></pre></div></div>
<p>Las partes rodeadas de <code class="language-plaintext highlighter-rouge">{% y %}</code> son c√≥digo <a href="http://shopify.github.io/liquid/">Liquid</a>, un lenguaje de plantillas usado en Jekyll para generar html est√°tico de forma simple.</p>

<p>En el c√≥digo vemos como se recorren los valores de <code class="language-plaintext highlighter-rouge">include.post.categories</code>. <code class="language-plaintext highlighter-rouge">include.post</code> nos da acceso a la variable <code class="language-plaintext highlighter-rouge">post</code> a la que hac√≠amos referencia m√°s arriba, correspondiente a la propiedad <code class="language-plaintext highlighter-rouge">page</code> de la p√°gina donde se va a incluir el c√≥digo. <code class="language-plaintext highlighter-rouge">categories</code> es una propiedad a√±adida por el <em>plugin</em> <a href="https://github.com/jekyll/jekyll-archives">jekyll-archives</a>, y nos da acceso a las categor√≠as que hayamos asignado al post en su <em>front matter</em>. Con ellas se crea un enlace para ver todos los posts de cada categor√≠a.</p>

<p>El resto del c√≥digo crea la fecha del post. El c√≥digo est√° adaptado de esta <a href="http://stackoverflow.com/a/32914455">respuesta de StackOverflow</a>.</p>

<p>Con esto ya estamos listos para empezar a escribir el blog.</p>
:ET