I"æ<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  Existen dos formas de enviar datos al GPS del emulador de Android: con el DDMS (Dalvik Debug Monitor Service) y con la instrucci√≥n &#8216;geo&#8217; de la consola del emulador (como se explica en la documentaci√≥n [http://developer.android.com/guide/topics/location/index.html#location]). El DDMS es especialmente √∫til, ya que permite cargar archivos kml o gpx a partir de los cuales enviar actualizaciones peri√≥dicas al emulador. Sin embargo, en la versi√≥n 1.5 r2 de la SDK de Android hay dos bugs que resultan bastante molestos para desarrollar aplicaciones que usan el GPS.
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  El primero de ellos est√° relacionado con el formato de las coordenadas enviadas al emulador. Por alg√∫n motivo (probablemente relacionado con el caracter usado para separa los decimales, &#8216;,&#8217; en espa√±ol y &#8216;.&#8217; en ingl√©s) el emulador s√≥lo recibe correctamente las actualizaciones si la configuraci√≥n regional est√° establecida a idioma ingl√©s. En realidad no es necesario cambiar la configuraci√≥n local de todo el sistema. Usando DDMS, basta con establecer la siguiente variable de entorno: &#8216;java_debug=-Duser.language=en&#8217;, o, si usamos el plugin para Eclipse, a√±adir &#8216;-Duser.language=en&#8217; al eclipse.ini. M√°s informaci√≥n en la incidencia abierta en Google Code [http://code.google.com/p/android/issues/detail?id=915].
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  El segundo error se produce cuando intentamos enviar varias actualizaciones al GPS del emulador. Por alg√∫n motivo las localizaciones enviadas despu√©s de la primera no llegan al emulador. Esto significa que el m√©todo onLocationChanged s√≥lo ser√° invocado una vez. En la discusi√≥n sobre la incidencia abierta [http://code.google.com/p/android/issues/detail?id=2545] se indica una soluci√≥n provisional: cancelar la subscripci√≥n al LocationListener y volverla a subscribir:
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  public void onLocationChanged(Location location) {
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  <span style="white-space:pre;"> </span>mLocationManager.removeUpdates(locationListener);
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  <span style="white-space:pre;"> </span>mLocationManager.requestLocationUpdates(
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  LocationManager.GPS_PROVIDER,
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  3000,
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  1,
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  locationListener);
</div>

<p>Existen dos formas de enviar datos al GPS del emulador de Android: con el DDMS (Dalvik Debug Monitor Service) y con la instrucci√≥n ‚Äògeo‚Äô de la consola del emulador (como se explica en la <a href="http://developer.android.com/guide/topics/location/index.html#location">documentaci√≥n</a>). El DDMS es especialmente √∫til, ya que permite cargar archivos kml o gpx a partir de los cuales enviar actualizaciones peri√≥dicas al emulador. Sin embargo, en la versi√≥n 1.5 r2 de la SDK de Android hay dos bugs que resultan bastante inc√≥modos.</p>

<p><strong>El GPS no recibe ninguna se√±al</strong></p>

<p>El primero de ellos est√° relacionado con el formato de las coordenadas enviadas al emulador. Por alg√∫n motivo (probablemente relacionado con el car√°cter usado para separa los decimales, la coma en espa√±ol y punto en ingl√©s) el emulador s√≥lo recibe correctamente las actualizaciones si la configuraci√≥n regional est√° establecida a idioma ingl√©s.</p>

<p>Para solucionar este problema basta cambiar el <em>locale</em> del runtime de java. Usando DDMS, se establece la siguiente variable de entorno: ‚Äòjava_debug=-Duser.language=en‚Äô, o, si usamos el plugin para Eclipse, se a√±ade ‚Äò-Duser.language=en‚Äô al archivo eclipse.ini. M√°s informaci√≥n en la <a href="http://code.google.com/p/android/issues/detail?id=915">incidencia abierta en Google Code</a>.</p>

<p><strong>El GPS s√≥lo recibe la primera localizaci√≥n</strong></p>

<table border="0" cellspacing="0" cellpadding="2" width="460">
  <tr>
    <td width="458" valign="top">
      <span style="color:#ff0000;">Actualizaci√≥n: La versi√≥n 1.5 release 3 de la SDK ya corrige este error</span>
    </td>
  </tr>
</table>

<p>El segundo error se produce cuando intentamos enviar varias actualizaciones al GPS del emulador. Por alg√∫n motivo las localizaciones enviadas despu√©s de la primera no llegan al emulador. Esto significa que el m√©todo onLocationChanged s√≥lo ser√° invocado una vez. En la discusi√≥n sobre la <a href="http://code.google.com/p/android/issues/detail?id=2545">incidencia abierta</a> se indica una soluci√≥n provisional: cancelar la subscripci√≥n al LocationListener y volverla a subscribir:</p>

<blockquote>
  <pre>public void onLocationChanged(Location location) {
<span style="white-space:pre;"> </span>mLocationManager.removeUpdates(locationListener);
<span style="white-space:pre;"> </span>mLocationManager.requestLocationUpdates(
LocationManager.GPS_PROVIDER,
3000,
1,
locationListener);
...
}</pre>
</blockquote>

<p>No he podido confirmar que este error afecte a todo el mundo que usa la SDK 1.5 r2, aunque s√≠ est√° bastante extendido. Es de suponer que Google lo corregir√° en la pr√≥xima revisi√≥n de la SDK.</p>
:ET