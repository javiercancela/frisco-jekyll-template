<!DOCTYPE html>

<html lang="en">
	<head>
		<script type="text/javascript">
		    var host = "www.javiercancela.com";
		    if ((host == window.location.host) && (window.location.protocol != "https:"))
		        window.location.protocol = "https";
		</script>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="generator" content="Jekyll v4.2.0">

		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300|Rubik:300">
		<link rel="stylesheet" href="/css/screen.css">
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="/manifest.json">
		<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
		<meta name="theme-color" content="#ffffff">

		<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Un ejemplo de aplicación Java para BlackBerry – Parte II | Página de Javier Cancela</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Un ejemplo de aplicación Java para BlackBerry – Parte II" />
<meta name="author" content="javiercancela" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Seguimos examinando la clase abstracta BaseApp." />
<meta property="og:description" content="Seguimos examinando la clase abstracta BaseApp." />
<link rel="canonical" href="https://www.javiercancela.com/2008/01/11/un-ejemplo-de-aplicacion-java-para-blackberry-parte-ii/" />
<meta property="og:url" content="https://www.javiercancela.com/2008/01/11/un-ejemplo-de-aplicacion-java-para-blackberry-parte-ii/" />
<meta property="og:site_name" content="Página de Javier Cancela" />
<meta property="og:image" content="https://www.javiercancela.com/images/obsolete.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2008-01-11T09:00:25+01:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.javiercancela.com/images/obsolete.jpg" />
<meta property="twitter:title" content="Un ejemplo de aplicación Java para BlackBerry – Parte II" />
<script type="application/ld+json">
{"dateModified":"2008-01-11T09:00:25+01:00","datePublished":"2008-01-11T09:00:25+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.javiercancela.com/2008/01/11/un-ejemplo-de-aplicacion-java-para-blackberry-parte-ii/"},"@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://www.javiercancela.com/siteicon.png"},"name":"javiercancela"},"url":"https://www.javiercancela.com/2008/01/11/un-ejemplo-de-aplicacion-java-para-blackberry-parte-ii/","author":{"@type":"Person","name":"javiercancela"},"image":"https://www.javiercancela.com/images/obsolete.jpg","description":"Seguimos examinando la clase abstracta BaseApp.","headline":"Un ejemplo de aplicación Java para BlackBerry – Parte II","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


		
	</head>

	<body>
		<header id="mainHeader">
			<div class="container">
				<div class="company-name">
					<a href="/">
						<span class="dark-logo"><img width="104" height="38" src="/images/logo/dark.png" alt="dark frisco logo"></span>
						<span class="light-logo"><img width="104" height="38" src="/images/logo/light.png" alt="light frisco logo"></span>
					</a>
				</div>
				<nav>
	<a class="nav-toggle" id="open-nav" href="#">&#9776;</a>
	
		
		

		
		<a href="/" class="" >Blog</a>
	
		
		

		
		<a href="/archivo/" class="" >Archivo</a>
	
		
		

		
		<a href="/sobre-mi/" class="" >Sobre mí</a>
	
</nav>

			</div>
		</header>

		<section class="hero" style="background-image: url(/images/obsolete.jpg)">
	<div class="inner-hero text-container">
		<div class="hero-text-container">
			<h1>Un ejemplo de aplicación Java para BlackBerry &#8211; Parte II</h1>
			<p class="subtext"></p>
		</div>
	</div>
</section>

<section>
	<div class="blog-post text-container">
		<p class="post-details">
	
		
		<span class="blog-filter">
			<a href="/category/blackberry/">BlackBerry</a>
		</span>
	
		
		<span class="blog-filter">
			<a href="/category/java-me/">Java ME</a>
		</span>
	
	
	
	
	
	
	
	<span class="post-date">11 de enero de 2008</span>
</p>


		<div class="post-content">
			<p>Seguimos examinando la clase abstracta BaseApp.</p>

<p><strong>Crear un menú</strong></p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">protected void makeMenu( Menu menu, int instance) {&lt;br /&gt;
Field focus = UiApplication.getUiApplication().getActiveScreen().getLeafFieldWithFocus();&lt;br /&gt;
if(focus != null) {&lt;br /&gt;
ContextMenu contextMenu = focus.getContextMenu();&lt;br /&gt;
if( !contextMenu.isEmpty()) {&lt;br /&gt;
menu.add(contextMenu);&lt;br /&gt;
menu.addSeparator();&lt;br /&gt;
}&lt;br /&gt;
}&lt;br /&gt;
menu.add(_closeItem);&lt;br /&gt;
}</code></p>
</blockquote>

<p>La clase <a href="http://www.blackberry.com/developers/docs/4.1api/net/rim/device/api/ui/component/Menu.html" title="Class Menu"><code class="language-plaintext highlighter-rouge">net.rim.device.api.ui.component.Menu</code></a> representa un menú que se despliega desde la parte superior derecha de la pantalla. Está compuesto por objetos MenuItem, de los que ya hablamos en la entrada anterior.</p>

<p>El método <code class="language-plaintext highlighter-rouge">makeMenu</code> es invocado cuando se produce un evento que tenga que mostrar el menú, como pulsar el <em>trackwheel</em>. En la implementación de las interfaces veremos un ejemplo. Este método, a través del objeto aplicación (<code class="language-plaintext highlighter-rouge">UiApplication.getUiApplication()</code>), obtiene la pantalla activa (<code class="language-plaintext highlighter-rouge">getActiveScreen()</code>) y de ella el campo hoja que tiene el foco (<code class="language-plaintext highlighter-rouge">getLeafFieldWithFocus()</code>). Un campo hoja (<em>Leaf Field</em>) es aquel que no actúa de contenedor para otro campo.</p>

<p>Si este campo tiene un menú contextual se añade al menú de la pantalla (el objeto <code class="language-plaintext highlighter-rouge">Menu</code>, que puede tener ya otros elementos), y tras él un separador y el elemento <code class="language-plaintext highlighter-rouge">_closeItem</code> que vimos en la entrada anterior.</p>

<p><strong>Implementación de interfaces</strong></p>

<p>Ahora vamos a ver los métodos de las otras dos interfaces que implementa nuestra clase, <code class="language-plaintext highlighter-rouge">KeyListener</code> y <code class="language-plaintext highlighter-rouge">TrackwheelListener</code>.</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">/* Invoked when the trackwheel is clicked. */&lt;br /&gt;
public boolean trackwheelClick( int status, int time ) {&lt;br /&gt;
Menu menu = new Menu();&lt;br /&gt;
makeMenu( menu, 0);&lt;br /&gt;
menu.show();&lt;br /&gt;
return true;&lt;br /&gt;
}&lt;br /&gt;
/* Invoked when the trackwheel is released. */&lt;br /&gt;
public boolean trackwheelUnclick( int status, int time ) {&lt;br /&gt;
return false;&lt;br /&gt;
}&lt;br /&gt;
/* Invoked when the trackwheel is rolled. */&lt;br /&gt;
public boolean trackwheelRoll(int amount, int status, int time) {&lt;br /&gt;
return false;&lt;br /&gt;
}</code></p>
</blockquote>

<p>No hacemos nada cuando se suelta el <em>trackwheel</em> o cuando se gira, pero cuando se pulsa creamos un menú, lo construimos y lo mostramos. Hacerlo en este evento es el comportamiento estándar en una BlackBerry.</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">public boolean keyChar(char key, int status, int time) {&lt;br /&gt;
/* Intercept the ESC key and exit the application. */&lt;br /&gt;
boolean retval = false;&lt;br /&gt;
switch (key) {&lt;br /&gt;
case Characters.ESCAPE:&lt;br /&gt;
onExit();&lt;br /&gt;
System.exit(0);&lt;br /&gt;
retval = true;&lt;br /&gt;
break;&lt;br /&gt;
}&lt;br /&gt;
return retval;&lt;br /&gt;
}&lt;br /&gt;
/* Implementation of KeyListener.keyDown(). */&lt;br /&gt;
public boolean keyDown(int keycode, int time) {&lt;br /&gt;
return false;&lt;br /&gt;
}&lt;br /&gt;
/* Implementation of KeyListener.keyRepeat(). */&lt;br /&gt;
public boolean keyRepeat(int keycode, int time) {&lt;br /&gt;
return false;&lt;br /&gt;
}&lt;br /&gt;
/* Implementation of KeyListener.keyStatus(). */&lt;br /&gt;
public boolean keyStatus(int keycode, int time) {&lt;br /&gt;
return false;&lt;br /&gt;
}&lt;br /&gt;
/* Implementation of KeyListener.keyUp(). */&lt;br /&gt;
public boolean keyUp(int keycode, int time) {&lt;br /&gt;
return false;&lt;br /&gt;
}</code></p>
</blockquote>

<p>De los eventos de teclado (<code class="language-plaintext highlighter-rouge">keyStatus</code> se dispara cuando se pulsan Shift o Alt) sólo actuamos en <code class="language-plaintext highlighter-rouge">keyChar</code>, que se dispara cuando se genera un carácter. En concreto nos interesa comprobar si el carácter es un <em>Escape</em>. Si es así, terminamos la aplicación.</p>

<p><strong>Listado completo de <code class="language-plaintext highlighter-rouge">BaseApp</code></strong></p>

<p>A continuación el listado completo de la clase <code class="language-plaintext highlighter-rouge">BaseApp</code>, que se utilizará en una próxima entrada para la clase <code class="language-plaintext highlighter-rouge">GPSDemo</code>.</p>

<blockquote>
  <p>`/*<br /></p>
  <ul>
    <li>BaseApp.java<br /></li>
    <li>Copyright (C) 2001-2004 Research In Motion Limited. All rights reserved.<br />
*/`</li>
  </ul>

  <p><code class="language-plaintext highlighter-rouge">package com.rim.samples.docs.baseapp;</code></p>

  <p><code class="language-plaintext highlighter-rouge">import net.rim.device.api.i18n.*;&lt;br /&gt;
import net.rim.device.api.system.*;&lt;br /&gt;
import net.rim.device.api.ui.container.*;&lt;br /&gt;
import net.rim.device.api.ui.*;&lt;br /&gt;
import net.rim.device.api.ui.component.*;</code></p>

  <p><code class="language-plaintext highlighter-rouge">public abstract class BaseApp extends UiApplication implements BaseAppResource, KeyListener, TrackwheelListener {&lt;br /&gt;
private MenuItem _closeItem;&lt;br /&gt;
private static ResourceBundle _resources =&lt;br /&gt;
ResourceBundle.getBundle(BUNDLE_ID, BUNDLE_NAME);&lt;br /&gt;
/* Constructor for the abstract base class. */&lt;br /&gt;
public BaseApp() {&lt;br /&gt;
_closeItem = new MenuItem(_resources, MENUITEM_CLOSE, 200000, 10) {&lt;br /&gt;
public void run() {&lt;br /&gt;
onExit();&lt;br /&gt;
System.exit(0);&lt;br /&gt;
}&lt;br /&gt;
};&lt;br /&gt;
}&lt;br /&gt;
/* Override this method to add custom menu items. */&lt;br /&gt;
protected void makeMenu( Menu menu, int instance) {&lt;br /&gt;
Field focus = UiApplication.getUiApplication().getActiveScreen().getLeafFieldWithFocus();&lt;br /&gt;
if(focus != null) {&lt;br /&gt;
ContextMenu contextMenu = focus.getContextMenu();&lt;br /&gt;
if( !contextMenu.isEmpty()) {&lt;br /&gt;
menu.add(contextMenu);&lt;br /&gt;
menu.addSeparator();&lt;br /&gt;
}&lt;br /&gt;
}&lt;br /&gt;
menu.add(_closeItem);&lt;br /&gt;
}&lt;br /&gt;
/* Invoked when the trackwheel is clicked. */&lt;br /&gt;
public boolean trackwheelClick( int status, int time ) {&lt;br /&gt;
Menu menu = new Menu();&lt;br /&gt;
makeMenu( menu, 0);&lt;br /&gt;
menu.show();&lt;br /&gt;
return true;&lt;br /&gt;
}&lt;br /&gt;
/* Invoked when the trackwheel is released. */&lt;br /&gt;
public boolean trackwheelUnclick( int status, int time ) {&lt;br /&gt;
return false;&lt;br /&gt;
}&lt;br /&gt;
/* Invoked when the trackwheel is rolled. */&lt;br /&gt;
public boolean trackwheelRoll(int amount, int status, int time) {&lt;br /&gt;
return false;&lt;br /&gt;
}&lt;br /&gt;
public boolean keyChar(char key, int status, int time) {&lt;br /&gt;
/* Intercept the ESC key and exit the application. */&lt;br /&gt;
boolean retval = false;&lt;br /&gt;
switch (key) {&lt;br /&gt;
case Characters.ESCAPE:&lt;br /&gt;
onExit();&lt;br /&gt;
System.exit(0);&lt;br /&gt;
retval = true;&lt;br /&gt;
break;&lt;br /&gt;
}&lt;br /&gt;
return retval;&lt;br /&gt;
}&lt;br /&gt;
/* Implementation of KeyListener.keyDown(). */&lt;br /&gt;
public boolean keyDown(int keycode, int time) {&lt;br /&gt;
return false;&lt;br /&gt;
}&lt;br /&gt;
/* Implementation of KeyListener.keyRepeat(). */&lt;br /&gt;
public boolean keyRepeat(int keycode, int time) {&lt;br /&gt;
return false;&lt;br /&gt;
}&lt;br /&gt;
/* Implementation of KeyListener.keyStatus(). */&lt;br /&gt;
public boolean keyStatus(int keycode, int time) {&lt;br /&gt;
return false;&lt;br /&gt;
}&lt;br /&gt;
/* Implementation of KeyListener.keyUp(). */&lt;br /&gt;
public boolean keyUp(int keycode, int time) {&lt;br /&gt;
return false;&lt;br /&gt;
}&lt;br /&gt;
protected abstract void onExit();&lt;br /&gt;
}</code></p>
</blockquote>

<h3 id="entradas-relacionadas">Entradas relacionadas:</h3>

<p><a href="/2008/01/09/un-ejemplo-de-aplicacion-java-para-blackberry-parte-i/">Un ejemplo de aplicación Java para BlackBerry – Parte I</a></p>

<p><a href="/2008/01/14/mas-sobre-la-firma-de-aplicaciones-symbian/">Un ejemplo de aplicación Java para BlackBerry – Parte III</a></p>

<p><a href="/2008/01/16/un-ejemplo-de-aplicacion-java-para-blackberry-parte-iv-y-final/">Un ejemplo de aplicación Java para BlackBerry – Parte IV y final</a></p>


			<div class="blog-navigation">
				
					<a class="prev" href="/2008/01/10/nueva-version-de-la-web-movil-de-yahoo/">&laquo; Nueva versión de la web móvil de Yahoo!</a>
				
				
					<a class="next" href="/2008/01/14/un-ejemplo-de-aplicacion-java-para-blackberry-parte-iii/">Un ejemplo de aplicación Java para BlackBerry &#8211; Parte III &raquo;</a>
				
			</div>


			
		</div>
	</div>
</section>



		<footer>
			<div class="container">
				<p class="editor-link"><a href="cloudcannon:collections/_data/footer.yml" class="btn"><strong>&#9998;</strong> Edit footer</a></p>
				<ul class="footer-left-links">
					
						<li>
							<a  href="/" >
								
								Blog
							</a>
						</li>
					
						<li>
							<a  href="/archivo/" >
								
								Archivo
							</a>
						</li>
					
						<li>
							<a  href="/sobre-mi/" >
								
								Sobre mí
							</a>
						</li>
					
				</ul>
				<ul class="footer-right-links">
					
						<li>
							<a target="_blank" href="https://twitter.com/javier_cancela_" class="twitter-icon">
								
		<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z" /></svg>
	
								
							</a>
						</li>
					
						<li>
							<a target="_blank" href="https://www.linkedin.com/in/javiercancela" class="linkedin-icon">
								
		<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M19,19H16V13.7A1.5,1.5 0 0,0 14.5,12.2A1.5,1.5 0 0,0 13,13.7V19H10V10H13V11.2C13.5,10.36 14.59,9.8 15.5,9.8A3.5,3.5 0 0,1 19,13.3M6.5,8.31C5.5,8.31 4.69,7.5 4.69,6.5A1.81,1.81 0 0,1 6.5,4.69C7.5,4.69 8.31,5.5 8.31,6.5A1.81,1.81 0 0,1 6.5,8.31M8,19H5V10H8M20,2H4C2.89,2 2,2.89 2,4V20A2,2 0 0,0 4,22H20A2,2 0 0,0 22,20V4C22,2.89 21.1,2 20,2Z" /></svg>
	
								
							</a>
						</li>
					
						<li>
							<a  href="/feed.xml" class="rss-icon">
								
		<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><circle cx="6.18" cy="17.82" r="2.18"/><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
	
								
							</a>
						</li>
					
				</ul>
				<p class="copyright">
					<a href="https://cloudcannon.com/">
						Template by CloudCannon
					</a>
				</p>
			</div>
		</footer>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script src="/js/main.js"></script>
		<script src="/js/prism.js"></script>
		<script id="dsq-count-scr" src="//javiercancela.disqus.com/count.js" async></script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		<script type="text/javascript">
			MathJax.Hub.Config({
				config: ["MMLorHTML.js"],
				extensions: ["tex2jax.js"],
				jax: ["input/TeX"],
				displayAlign: "center",
				tex2jax: {
					inlineMath: [ ['$','$'], ["\\(","\\)"] ],
					displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
					processEscapes: false
				},
				TeX: {
					extensions: ["AMSmath.js", "AMSsymbols.js"],
					TagSide: "right",
					TagIndent: ".8em",
					MultLineWidth: "85%",
					equationNumbers: {
						autoNumber: "AMS",
					},
					unicode: {
						fonts: "STIXGeneral,'Arial Unicode MS'"
					}
				},
				showProcessingMessages: false
			});
		</script>		
	</body>
</html>
