<!DOCTYPE html>

<html lang="en">
	<head>
		<script type="text/javascript">
		    var host = "www.javiercancela.com";
		    if ((host == window.location.host) && (window.location.protocol != "https:"))
		        window.location.protocol = "https";
		</script>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="generator" content="Jekyll v4.2.0">

		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300|Rubik:300">
		<link rel="stylesheet" href="/css/screen.css">
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
		<link rel="manifest" href="/manifest.json">
		<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
		<meta name="theme-color" content="#ffffff">

		<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Errores emulando el GPS en Android | Página de Javier Cancela</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Errores emulando el GPS en Android" />
<meta name="author" content="javiercancela" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Existen dos formas de enviar datos al GPS del emulador de Android: con el DDMS (Dalvik Debug Monitor Service) y con la instrucción &#8216;geo&#8217; de la consola del emulador (como se explica en la documentación [http://developer.android.com/guide/topics/location/index.html#location]). El DDMS es especialmente útil, ya que permite cargar archivos kml o gpx a partir de los cuales enviar actualizaciones periódicas al emulador. Sin embargo, en la versión 1.5 r2 de la SDK de Android hay dos bugs que resultan bastante molestos para desarrollar aplicaciones que usan el GPS." />
<meta property="og:description" content="Existen dos formas de enviar datos al GPS del emulador de Android: con el DDMS (Dalvik Debug Monitor Service) y con la instrucción &#8216;geo&#8217; de la consola del emulador (como se explica en la documentación [http://developer.android.com/guide/topics/location/index.html#location]). El DDMS es especialmente útil, ya que permite cargar archivos kml o gpx a partir de los cuales enviar actualizaciones periódicas al emulador. Sin embargo, en la versión 1.5 r2 de la SDK de Android hay dos bugs que resultan bastante molestos para desarrollar aplicaciones que usan el GPS." />
<link rel="canonical" href="https://www.javiercancela.com/2009/07/15/errores-emulando-el-gps-en-android/" />
<meta property="og:url" content="https://www.javiercancela.com/2009/07/15/errores-emulando-el-gps-en-android/" />
<meta property="og:site_name" content="Página de Javier Cancela" />
<meta property="og:image" content="https://www.javiercancela.com/images/obsolete.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2009-07-15T09:00:47+02:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.javiercancela.com/images/obsolete.jpg" />
<meta property="twitter:title" content="Errores emulando el GPS en Android" />
<script type="application/ld+json">
{"dateModified":"2009-07-15T09:00:47+02:00","datePublished":"2009-07-15T09:00:47+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.javiercancela.com/2009/07/15/errores-emulando-el-gps-en-android/"},"@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://www.javiercancela.com/siteicon.png"},"name":"javiercancela"},"url":"https://www.javiercancela.com/2009/07/15/errores-emulando-el-gps-en-android/","author":{"@type":"Person","name":"javiercancela"},"image":"https://www.javiercancela.com/images/obsolete.jpg","description":"Existen dos formas de enviar datos al GPS del emulador de Android: con el DDMS (Dalvik Debug Monitor Service) y con la instrucción &#8216;geo&#8217; de la consola del emulador (como se explica en la documentación [http://developer.android.com/guide/topics/location/index.html#location]). El DDMS es especialmente útil, ya que permite cargar archivos kml o gpx a partir de los cuales enviar actualizaciones periódicas al emulador. Sin embargo, en la versión 1.5 r2 de la SDK de Android hay dos bugs que resultan bastante molestos para desarrollar aplicaciones que usan el GPS.","headline":"Errores emulando el GPS en Android","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


		
			<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58458863-1', 'auto');
  ga('send', 'pageview');

</script>
		
	</head>

	<body>
		<header id="mainHeader">
			<div class="container">
				<div class="company-name">
					<a href="/">
						<span class="dark-logo"><img width="104" height="38" src="/images/logo/dark.png" alt="dark frisco logo"></span>
						<span class="light-logo"><img width="104" height="38" src="/images/logo/light.png" alt="light frisco logo"></span>
					</a>
				</div>
				<nav>
	<a class="nav-toggle" id="open-nav" href="#">&#9776;</a>
	
		
		

		
		<a href="/" class="" >Blog</a>
	
		
		

		
		<a href="/archivo/" class="" >Archivo</a>
	
		
		

		
		<a href="/sobre-mi/" class="" >Sobre mí</a>
	
</nav>

			</div>
		</header>

		<section class="hero" style="background-image: url(/images/obsolete.jpg)">
	<div class="inner-hero text-container">
		<div class="hero-text-container">
			<h1>Errores emulando el GPS en Android</h1>
			<p class="subtext"></p>
		</div>
	</div>
</section>

<section>
	<div class="blog-post text-container">
		<p class="post-details">
	
		
		<span class="blog-filter">
			<a href="/category/android/">Android</a>
		</span>
	
	
	
	
	
	
	
	<span class="post-date">15 de julio de 2009</span>
</p>


		<div class="post-content">
			<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  Existen dos formas de enviar datos al GPS del emulador de Android: con el DDMS (Dalvik Debug Monitor Service) y con la instrucción &#8216;geo&#8217; de la consola del emulador (como se explica en la documentación [http://developer.android.com/guide/topics/location/index.html#location]). El DDMS es especialmente útil, ya que permite cargar archivos kml o gpx a partir de los cuales enviar actualizaciones periódicas al emulador. Sin embargo, en la versión 1.5 r2 de la SDK de Android hay dos bugs que resultan bastante molestos para desarrollar aplicaciones que usan el GPS.
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  El primero de ellos está relacionado con el formato de las coordenadas enviadas al emulador. Por algún motivo (probablemente relacionado con el caracter usado para separa los decimales, &#8216;,&#8217; en español y &#8216;.&#8217; en inglés) el emulador sólo recibe correctamente las actualizaciones si la configuración regional está establecida a idioma inglés. En realidad no es necesario cambiar la configuración local de todo el sistema. Usando DDMS, basta con establecer la siguiente variable de entorno: &#8216;java_debug=-Duser.language=en&#8217;, o, si usamos el plugin para Eclipse, añadir &#8216;-Duser.language=en&#8217; al eclipse.ini. Más información en la incidencia abierta en Google Code [http://code.google.com/p/android/issues/detail?id=915].
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  El segundo error se produce cuando intentamos enviar varias actualizaciones al GPS del emulador. Por algún motivo las localizaciones enviadas después de la primera no llegan al emulador. Esto significa que el método onLocationChanged sólo será invocado una vez. En la discusión sobre la incidencia abierta [http://code.google.com/p/android/issues/detail?id=2545] se indica una solución provisional: cancelar la subscripción al LocationListener y volverla a subscribir:
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  public void onLocationChanged(Location location) {
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  <span style="white-space:pre;"> </span>mLocationManager.removeUpdates(locationListener);
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  <span style="white-space:pre;"> </span>mLocationManager.requestLocationUpdates(
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  LocationManager.GPS_PROVIDER,
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  3000,
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  1,
</div>

<div id="_mcePaste" style="position:absolute;width:1px;height:1px;top:0;left:-10000px;">
  locationListener);
</div>

<p>Existen dos formas de enviar datos al GPS del emulador de Android: con el DDMS (Dalvik Debug Monitor Service) y con la instrucción ‘geo’ de la consola del emulador (como se explica en la <a href="http://developer.android.com/guide/topics/location/index.html#location">documentación</a>). El DDMS es especialmente útil, ya que permite cargar archivos kml o gpx a partir de los cuales enviar actualizaciones periódicas al emulador. Sin embargo, en la versión 1.5 r2 de la SDK de Android hay dos bugs que resultan bastante incómodos.</p>

<p><strong>El GPS no recibe ninguna señal</strong></p>

<p>El primero de ellos está relacionado con el formato de las coordenadas enviadas al emulador. Por algún motivo (probablemente relacionado con el carácter usado para separa los decimales, la coma en español y punto en inglés) el emulador sólo recibe correctamente las actualizaciones si la configuración regional está establecida a idioma inglés.</p>

<p>Para solucionar este problema basta cambiar el <em>locale</em> del runtime de java. Usando DDMS, se establece la siguiente variable de entorno: ‘java_debug=-Duser.language=en’, o, si usamos el plugin para Eclipse, se añade ‘-Duser.language=en’ al archivo eclipse.ini. Más información en la <a href="http://code.google.com/p/android/issues/detail?id=915">incidencia abierta en Google Code</a>.</p>

<p><strong>El GPS sólo recibe la primera localización</strong></p>

<table border="0" cellspacing="0" cellpadding="2" width="460">
  <tr>
    <td width="458" valign="top">
      <span style="color:#ff0000;">Actualización: La versión 1.5 release 3 de la SDK ya corrige este error</span>
    </td>
  </tr>
</table>

<p>El segundo error se produce cuando intentamos enviar varias actualizaciones al GPS del emulador. Por algún motivo las localizaciones enviadas después de la primera no llegan al emulador. Esto significa que el método onLocationChanged sólo será invocado una vez. En la discusión sobre la <a href="http://code.google.com/p/android/issues/detail?id=2545">incidencia abierta</a> se indica una solución provisional: cancelar la subscripción al LocationListener y volverla a subscribir:</p>

<blockquote>
  <pre>public void onLocationChanged(Location location) {
<span style="white-space:pre;"> </span>mLocationManager.removeUpdates(locationListener);
<span style="white-space:pre;"> </span>mLocationManager.requestLocationUpdates(
LocationManager.GPS_PROVIDER,
3000,
1,
locationListener);
...
}</pre>
</blockquote>

<p>No he podido confirmar que este error afecte a todo el mundo que usa la SDK 1.5 r2, aunque sí está bastante extendido. Es de suponer que Google lo corregirá en la próxima revisión de la SDK.</p>


			<div class="blog-navigation">
				
					<a class="prev" href="/2009/07/13/notificaciones-push-en-dispositivos-moviles/">&laquo; Notificaciones &#8216;push&#8217; en dispositivos móviles</a>
				
				
					<a class="next" href="/2009/07/20/desarrollo-en-android-acelermetro-magnetmetro-y-sensores-de-orientacin-y-temperatura-en-el-htc-magic/">Desarrollo en Android: acelerómetro, magnetómetro y sensores de orientación y temperatura en el HTC Magic &raquo;</a>
				
			</div>


			
		</div>
	</div>
</section>



		<footer>
			<div class="container">
				<p class="editor-link"><a href="cloudcannon:collections/_data/footer.yml" class="btn"><strong>&#9998;</strong> Edit footer</a></p>
				<ul class="footer-left-links">
					
						<li>
							<a  href="/" >
								
								Blog
							</a>
						</li>
					
						<li>
							<a  href="/archivo/" >
								
								Archivo
							</a>
						</li>
					
						<li>
							<a  href="/sobre-mi/" >
								
								Sobre mí
							</a>
						</li>
					
				</ul>
				<ul class="footer-right-links">
					
						<li>
							<a target="_blank" href="https://twitter.com/javier_cancela_" class="twitter-icon">
								
		<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z" /></svg>
	
								
							</a>
						</li>
					
						<li>
							<a target="_blank" href="https://www.linkedin.com/in/javiercancela" class="linkedin-icon">
								
		<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M19,19H16V13.7A1.5,1.5 0 0,0 14.5,12.2A1.5,1.5 0 0,0 13,13.7V19H10V10H13V11.2C13.5,10.36 14.59,9.8 15.5,9.8A3.5,3.5 0 0,1 19,13.3M6.5,8.31C5.5,8.31 4.69,7.5 4.69,6.5A1.81,1.81 0 0,1 6.5,4.69C7.5,4.69 8.31,5.5 8.31,6.5A1.81,1.81 0 0,1 6.5,8.31M8,19H5V10H8M20,2H4C2.89,2 2,2.89 2,4V20A2,2 0 0,0 4,22H20A2,2 0 0,0 22,20V4C22,2.89 21.1,2 20,2Z" /></svg>
	
								
							</a>
						</li>
					
						<li>
							<a  href="/feed.xml" class="rss-icon">
								
		<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><circle cx="6.18" cy="17.82" r="2.18"/><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/></svg>
	
								
							</a>
						</li>
					
				</ul>
				<p class="copyright">
					<a href="https://cloudcannon.com/">
						Template by CloudCannon
					</a>
				</p>
			</div>
		</footer>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script src="/js/main.js"></script>
		<script src="/js/prism.js"></script>
		<script id="dsq-count-scr" src="//javiercancela.disqus.com/count.js" async></script>
		<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
		<script type="text/javascript">
			MathJax.Hub.Config({
				config: ["MMLorHTML.js"],
				extensions: ["tex2jax.js"],
				jax: ["input/TeX"],
				displayAlign: "center",
				tex2jax: {
					inlineMath: [ ['$','$'], ["\\(","\\)"] ],
					displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
					processEscapes: false
				},
				TeX: {
					extensions: ["AMSmath.js", "AMSsymbols.js"],
					TagSide: "right",
					TagIndent: ".8em",
					MultLineWidth: "85%",
					equationNumbers: {
						autoNumber: "AMS",
					},
					unicode: {
						fonts: "STIXGeneral,'Arial Unicode MS'"
					}
				},
				showProcessingMessages: false
			});
		</script>		
	</body>
</html>
